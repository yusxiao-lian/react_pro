{"version":3,"sources":["components/NavHeader/index.js","components/NavHeader/index.module.scss","components/HousePackage/index.js","components/HousePackage/index.module.css","pages/Rent/Add/index.module.css","pages/Rent/Add/index.js"],"names":["withRouter","_ref","children","history","className","rightContent","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","antd_mobile_lib_nav_bar__WEBPACK_IMPORTED_MODULE_1___default","styles","navBar","join","mode","icon","onLeftClick","go","module","exports","HOUSE_PACKAGE","id","name","HousePackage","state","selectedNames","toggleSelect","newSelectedNames","_this","indexOf","filter","item","concat","Object","E_reactdemo_11_react_04_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","props","onSelect","setState","_this2","this","_this$props","select","list","v","includes","map","isSelected","react__WEBPACK_IMPORTED_MODULE_6___default","key","active","onClick","root","renderItems","Component","rentHeader","bottom","cancel","imgpicker","input","label","confirm","title","pics","supporting","desc","alert","antd_mobile_lib_modal__WEBPACK_IMPORTED_MODULE_23___default","roomTypeData","value","orientedData","floorData","RentAdd","E_reactdemo_11_react_04_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_17__","E_reactdemo_11_react_04_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_19__","E_reactdemo_11_react_04_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_20__","call","onCancel","text","onPress","_onPress","E_reactdemo_11_react_04_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_16__","E_reactdemo_11_react_04_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_15___default","mark","_callee","wrap","_context","prev","next","abrupt","stop","apply","arguments","getValue","E_reactdemo_11_react_04_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_14__","handleImage","files","type","index","tempSlides","addHouse","_callee2","_this$state","description","oriented","price","roomType","size","floor","community","form","res","houseImg","houseRes","_context2","length","FormData","forEach","append","file","API","post","headers","Content-Type","sent","data","body","status","antd_mobile_lib_toast__WEBPACK_IMPORTED_MODULE_13___default","info","push","from","location","console","log","Item","antd_mobile_lib_list__WEBPACK_IMPORTED_MODULE_11___default","_this$state2","react__WEBPACK_IMPORTED_MODULE_24___default","_components_NavHeader__WEBPACK_IMPORTED_MODULE_26__","header","renderHeader","data-role","extra","arrow","replace","antd_mobile_lib_input_item__WEBPACK_IMPORTED_MODULE_9___default","placeholder","onChange","val","antd_mobile_lib_picker__WEBPACK_IMPORTED_MODULE_7___default","cols","antd_mobile_lib_image_picker__WEBPACK_IMPORTED_MODULE_5___default","multiple","_components_HousePackage__WEBPACK_IMPORTED_MODULE_27__","selectedValues","antd_mobile_lib_textarea_item__WEBPACK_IMPORTED_MODULE_3___default","rows","autoHeight","antd_mobile_lib_flex__WEBPACK_IMPORTED_MODULE_1___default"],"mappings":"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","file":"static/js/16.a7dd6a87.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport { NavBar } from 'antd-mobile'\r\n\r\nimport { withRouter } from 'react-router-dom'\r\n\r\n// 添加属性校验\r\nimport PropTypes from 'prop-types'\r\n\r\n// 导入样式\r\nimport styles from './index.module.scss'\r\n\r\nconst NavHeader = ({ children, history, className, rightContent }) => {\r\n  return (\r\n    <NavBar\r\n      className={[styles.navBar, className].join(' ')}\r\n      mode=\"light\"\r\n      icon={<i className=\"iconfont icon-back\" />}\r\n      onLeftClick={() => history.go(-1)}\r\n      rightContent={rightContent}\r\n    >\r\n      {children}\r\n    </NavBar>\r\n  )\r\n}\r\n\r\n// 添加属性校验\r\nNavHeader.propTypes = {\r\n  // 约定 children 是字符串类型，并且为必填项\r\n  children: PropTypes.string.isRequired,\r\n  className: PropTypes.string,\r\n  rightContent: PropTypes.array\r\n}\r\n\r\nexport default withRouter(NavHeader)\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navBar\":\"NavHeader_navBar__UggGR\"};","import React, { Component } from 'react'\r\n\r\nimport styles from './index.module.css'\r\n\r\n// 所有房屋配置项\r\nconst HOUSE_PACKAGE = [\r\n  {\r\n    id: 1,\r\n    name: '衣柜',\r\n    icon: 'icon-wardrobe'\r\n  },\r\n  {\r\n    id: 2,\r\n    name: '洗衣机',\r\n    icon: 'icon-wash'\r\n  },\r\n  {\r\n    id: 3,\r\n    name: '空调',\r\n    icon: 'icon-air'\r\n  },\r\n  {\r\n    id: 4,\r\n    name: '天然气',\r\n    icon: 'icon-gas'\r\n  },\r\n  {\r\n    id: 5,\r\n    name: '冰箱',\r\n    icon: 'icon-ref'\r\n  },\r\n  {\r\n    id: 6,\r\n    name: '暖气',\r\n    icon: 'icon-Heat'\r\n  },\r\n  {\r\n    id: 7,\r\n    name: '电视',\r\n    icon: 'icon-vid'\r\n  },\r\n  {\r\n    id: 8,\r\n    name: '热水器',\r\n    icon: 'icon-heater'\r\n  },\r\n  {\r\n    id: 9,\r\n    name: '宽带',\r\n    icon: 'icon-broadband'\r\n  },\r\n  {\r\n    id: 10,\r\n    name: '沙发',\r\n    icon: 'icon-sofa'\r\n  }\r\n]\r\n\r\n/* \r\n  该组件的两种功能：\r\n  1 根据传入的 list 展示房屋配置列表（房源详情页面）\r\n    <HousePackage list={['衣柜', '洗衣机']} />\r\n  2 从所有配置列表中选择房屋配置（发布房源页面）\r\n    <HousePackage select onSelect={selectedItems => {...}} />\r\n*/\r\nexport default class HousePackage extends Component {\r\n  state = {\r\n    // 选中名称\r\n    selectedNames: []\r\n  }\r\n\r\n  // 根据id切换选中状态\r\n  toggleSelect = name => {\r\n    const { selectedNames } = this.state\r\n    let newSelectedNames\r\n\r\n    // 判断该项是否选中\r\n    if (selectedNames.indexOf(name) > -1) {\r\n      // 选中：从数组中删除选中项，也就是保留未选中项\r\n      newSelectedNames = selectedNames.filter(item => item !== name)\r\n    } else {\r\n      // 未选中：添加到数组中\r\n      newSelectedNames = [...selectedNames, name]\r\n    }\r\n\r\n    // 传递给父组件\r\n    this.props.onSelect(newSelectedNames)\r\n\r\n    this.setState({\r\n      selectedNames: newSelectedNames\r\n    })\r\n  }\r\n\r\n  // 渲染列表项\r\n  renderItems() {\r\n    const { selectedNames } = this.state\r\n    // select 的值为 true 表示 选择房屋配置；false 表示仅展示房屋列表\r\n    // list 表示要展示的列表项\r\n    const { select, list } = this.props\r\n\r\n    let data\r\n    // 如果传了 select 表示：选择 房屋配置\r\n    // 如果没传 select 表示：展示 房屋配置 列表\r\n    if (select) {\r\n      data = HOUSE_PACKAGE\r\n    } else {\r\n      // 展示房屋配置列表\r\n      // 从所有的列表项中过滤出要展示的（list）列表项\r\n      data = HOUSE_PACKAGE.filter(v => list.includes(v.name))\r\n    }\r\n\r\n    return data.map(item => {\r\n      // 判断该项是否选中\r\n      const isSelected = selectedNames.indexOf(item.name) > -1\r\n\r\n      return (\r\n        <li\r\n          key={item.id}\r\n          className={[styles.item, isSelected ? styles.active : ''].join(' ')}\r\n          onClick={select && (() => this.toggleSelect(item.name))}\r\n        >\r\n          <p>\r\n            <i className={`iconfont ${item.icon} ${styles.icon}`} />\r\n          </p>\r\n          {item.name}\r\n        </li>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return <ul className={styles.root}>{this.renderItems()}</ul>\r\n  }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"HousePackage_root__1KQvx\",\"item\":\"HousePackage_item__1Mk6c\",\"active\":\"HousePackage_active__1goDX\",\"icon\":\"HousePackage_icon__-Bv0Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Add_root__3ZqCk\",\"rentHeader\":\"Add_rentHeader__ePsWV\",\"bottom\":\"Add_bottom__3k-gw\",\"cancel\":\"Add_cancel__PW3Oq\",\"imgpicker\":\"Add_imgpicker__2Rhth\",\"input\":\"Add_input__zV23X\",\"label\":\"Add_label__1EYUj\",\"confirm\":\"Add_confirm__2Gi1N\",\"title\":\"Add_title__1memc\",\"pics\":\"Add_pics__1KrTT\",\"supporting\":\"Add_supporting__3flSM\",\"desc\":\"Add_desc__1qnaT\"};","import React, { Component } from 'react'\r\n\r\nimport {\r\n  Flex,\r\n  List,\r\n  InputItem,\r\n  Picker,\r\n  ImagePicker,\r\n  TextareaItem,\r\n  Modal,\r\n  Toast\r\n} from 'antd-mobile'\r\n\r\nimport { API } from '../../../utils'\r\n\r\nimport NavHeader from '../../../components/NavHeader'\r\nimport HousePackge from '../../../components/HousePackage'\r\n\r\nimport styles from './index.module.css'\r\n\r\nconst alert = Modal.alert\r\n\r\n// 房屋类型\r\nconst roomTypeData = [\r\n  { label: '一室', value: 'ROOM|d4a692e4-a177-37fd' },\r\n  { label: '二室', value: 'ROOM|d1a00384-5801-d5cd' },\r\n  { label: '三室', value: 'ROOM|20903ae0-c7bc-f2e2' },\r\n  { label: '四室', value: 'ROOM|ce2a5daa-811d-2f49' },\r\n  { label: '四室+', value: 'ROOM|2731c38c-5b19-ff7f' }\r\n]\r\n\r\n// 朝向：\r\nconst orientedData = [\r\n  { label: '东', value: 'ORIEN|141b98bf-1ad0-11e3' },\r\n  { label: '西', value: 'ORIEN|103fb3aa-e8b4-de0e' },\r\n  { label: '南', value: 'ORIEN|61e99445-e95e-7f37' },\r\n  { label: '北', value: 'ORIEN|caa6f80b-b764-c2df' },\r\n  { label: '东南', value: 'ORIEN|dfb1b36b-e0d1-0977' },\r\n  { label: '东北', value: 'ORIEN|67ac2205-7e0f-c057' },\r\n  { label: '西南', value: 'ORIEN|2354e89e-3918-9cef' },\r\n  { label: '西北', value: 'ORIEN|80795f1a-e32f-feb9' }\r\n]\r\n\r\n// 楼层\r\nconst floorData = [\r\n  { label: '高楼层', value: 'FLOOR|1' },\r\n  { label: '中楼层', value: 'FLOOR|2' },\r\n  { label: '低楼层', value: 'FLOOR|3' }\r\n]\r\n\r\nexport default class RentAdd extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    console.log('发布房源页面：', props)\r\n    const community = {\r\n      name: '',\r\n      id: ''\r\n    }\r\n    // 从 关键词搜索页面 获取到传递过来的小区信息\r\n    const { state } = props.location\r\n    if (state) {\r\n      community.name = state.name\r\n      community.id = state.id\r\n    }\r\n\r\n    this.state = {\r\n      // 临时图片集合\r\n      tempSlides: [],\r\n\r\n      // 小区的名称和id\r\n      community,\r\n      // 价格\r\n      price: '',\r\n      // 面积\r\n      size: '',\r\n      // 房屋类型\r\n      roomType: '',\r\n      // 楼层\r\n      floor: '',\r\n      // 朝向：\r\n      oriented: '',\r\n      // 房屋标题\r\n      title: '',\r\n      // 房屋图片\r\n      houseImg: '',\r\n      // 房屋配套：\r\n      supporting: '',\r\n      // 房屋描述\r\n      description: ''\r\n    }\r\n  }\r\n\r\n  // 取消编辑，返回上一页\r\n  onCancel = () => {\r\n    alert('提示', '放弃发布房源?', [\r\n      {\r\n        text: '放弃',\r\n        onPress: async () => this.props.history.go(-1)\r\n      },\r\n      {\r\n        text: '继续编辑'\r\n      }\r\n    ])\r\n  }\r\n\r\n  // 获取表单元素的值\r\n  getValue = (name, value) => {\r\n    // name 表示要更新的状态\r\n    // value 表示当前表单元素的值\r\n    this.setState({\r\n      [name]: value\r\n    })\r\n  }\r\n\r\n  // 获取到选中图片\r\n  handleImage = (files, type, index) => {\r\n    // console.log(files, type, index)\r\n\r\n    this.setState({\r\n      tempSlides: files\r\n    })\r\n  }\r\n\r\n  /* \r\n    ① 给提交按钮，绑定单击事件。\r\n    ② 在事件处理程序中，判断是否有房屋图片。\r\n    ③ 如果没有，不做任何处理。\r\n    ④ 如果有，就创建 FormData 的实例对象（form）。\r\n    ⑤ 遍历 tempSlides 数组，分别将每一个图片对象，添加到 form 中（键为： file，根据接口文档获得）。\r\n    ⑥ 调用图片上传接口，传递form参数，并设置请求头 Content-Type 为 multipart/form-data。\r\n    ⑦ 通过接口返回值获取到的图片路径。\r\n  */\r\n  addHouse = async () => {\r\n    // 上传图片\r\n    const {\r\n      tempSlides,\r\n      title,\r\n      description,\r\n      oriented,\r\n      supporting,\r\n      price,\r\n      roomType,\r\n      size,\r\n      floor,\r\n      community\r\n    } = this.state\r\n\r\n    if (tempSlides.length <= 0) return\r\n\r\n    const form = new FormData()\r\n    tempSlides.forEach(item => {\r\n      form.append('file', item.file)\r\n    })\r\n\r\n    const res = await API.post('/houses/image', form, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data'\r\n      }\r\n    })\r\n\r\n    // 获取到上传图片的地址\r\n    let houseImg = res.data.body.join('|')\r\n\r\n    // 发布房源\r\n    const houseRes = await API.post('/user/houses', {\r\n      houseImg,\r\n      title,\r\n      description,\r\n      oriented,\r\n      supporting,\r\n      price,\r\n      roomType,\r\n      size,\r\n      floor,\r\n      community: community.id\r\n    })\r\n\r\n    // console.log('发布房源结果：', houseRes)\r\n    const { status } = houseRes.data\r\n    if (status === 400) {\r\n      // 登录超时，提醒用户重新登录\r\n      Toast.info(\r\n        '登录超时，请重新登录',\r\n        2,\r\n        () => {\r\n          this.props.history.push('/login', {\r\n            from: this.props.location\r\n          })\r\n        },\r\n        false\r\n      )\r\n    } else {\r\n      Toast.info(\r\n        '发布成功',\r\n        1,\r\n        () => {\r\n          this.props.history.push('/rent')\r\n        },\r\n        false\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const Item = List.Item\r\n    const { history } = this.props\r\n    const {\r\n      community,\r\n      price,\r\n      roomType,\r\n      floor,\r\n      oriented,\r\n      description,\r\n      tempSlides,\r\n      title,\r\n      size\r\n    } = this.state\r\n\r\n    return (\r\n      <div className={styles.root}>\r\n        <NavHeader className={styles.rentHeader} onLeftClick={this.onCancel}>\r\n          发布房源\r\n        </NavHeader>\r\n\r\n        <List\r\n          className={styles.header}\r\n          renderHeader={() => '房源信息'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          {/* 选择所在小区 */}\r\n          <Item\r\n            extra={community.name || '请输入小区名称'}\r\n            arrow=\"horizontal\"\r\n            onClick={() => history.replace('/rent/search')}\r\n          >\r\n            小区名称\r\n          </Item>\r\n          <InputItem\r\n            placeholder=\"请输入租金/月\"\r\n            extra=\"￥/月\"\r\n            value={price}\r\n            onChange={val => this.getValue('price', val)}\r\n          >\r\n            租&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;金\r\n          </InputItem>\r\n          <InputItem\r\n            placeholder=\"请输入建筑面积\"\r\n            extra=\"㎡\"\r\n            value={size}\r\n            onChange={val => this.getValue('size', val)}\r\n          >\r\n            建筑面积\r\n          </InputItem>\r\n          <Picker\r\n            data={roomTypeData}\r\n            value={[roomType]}\r\n            cols={1}\r\n            onChange={val => this.getValue('roomType', val[0])}\r\n          >\r\n            <Item arrow=\"horizontal\">\r\n              户&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;型\r\n            </Item>\r\n          </Picker>\r\n\r\n          <Picker\r\n            data={floorData}\r\n            value={[floor]}\r\n            cols={1}\r\n            onChange={val => this.getValue('floor', val[0])}\r\n          >\r\n            <Item arrow=\"horizontal\">所在楼层</Item>\r\n          </Picker>\r\n          <Picker\r\n            data={orientedData}\r\n            value={[oriented]}\r\n            cols={1}\r\n            onChange={val => this.getValue('oriented', val[0])}\r\n          >\r\n            <Item arrow=\"horizontal\">\r\n              朝&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;向\r\n            </Item>\r\n          </Picker>\r\n        </List>\r\n\r\n        <List\r\n          className={styles.title}\r\n          renderHeader={() => '房屋标题'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <InputItem\r\n            placeholder=\"请输入标题（例如：整租 小区名 2室 5000元）\"\r\n            value={title}\r\n            onChange={val => this.getValue('title', val)}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.pics}\r\n          renderHeader={() => '房屋图像'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <ImagePicker\r\n            files={tempSlides}\r\n            onChange={this.handleImage}\r\n            multiple={true}\r\n            className={styles.imgpicker}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.supporting}\r\n          renderHeader={() => '房屋配置'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <HousePackge\r\n            select\r\n            onSelect={selectedValues => {\r\n              // console.log('房屋配套：', selectedValues)\r\n              this.setState({\r\n                supporting: selectedValues.join('|')\r\n              })\r\n            }}\r\n          />\r\n        </List>\r\n\r\n        <List\r\n          className={styles.desc}\r\n          renderHeader={() => '房屋描述'}\r\n          data-role=\"rent-list\"\r\n        >\r\n          <TextareaItem\r\n            rows={5}\r\n            placeholder=\"请输入房屋描述信息\"\r\n            autoHeight\r\n            value={description}\r\n            onChange={val => this.getValue('description', val)}\r\n          />\r\n        </List>\r\n\r\n        <Flex className={styles.bottom}>\r\n          <Flex.Item className={styles.cancel} onClick={this.onCancel}>\r\n            取消\r\n          </Flex.Item>\r\n          <Flex.Item className={styles.confirm} onClick={this.addHouse}>\r\n            提交\r\n          </Flex.Item>\r\n        </Flex>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}